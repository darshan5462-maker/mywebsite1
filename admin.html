<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Dashboard</title>

<style>
body{font-family:Arial;background:#f4f6f8;}
.container{
  max-width:800px;
  margin:40px auto;
  background:#fff;
  padding:20px;
  border-radius:10px;
}
table{width:100%;border-collapse:collapse;}
th,td{border:1px solid #ccc;padding:8px;}
th{background:#138808;color:#fff;}
</style>
</head>

<body>

<script>
const ADMIN_PASSWORD = "admin123";
const entered = prompt("Enter Admin Password");
if (entered !== ADMIN_PASSWORD) {
  document.body.innerHTML = "<h2 style='text-align:center;color:red'>Access Denied</h2>";
  throw new Error("Unauthorized");
}
</script>

<div class="container">
<h2>üë®‚Äçüíº Admin Dashboard</h2>

<input id="searchInput" placeholder="Search by name / phone / ID"
       style="width:100%;padding:10px;margin-bottom:15px;">

<table>
<thead>
<tr>
  <th>ID</th>
  <th>Name</th>
  <th>Phone</th>
  <th>Card</th>
</tr>
</thead>
<tbody id="members"></tbody>
</table>
</div>

<script>
let allMembers = [];

fetch("https://script.google.com/macros/s/AKfycbzPXN_yQl8aOV6XZ0xrhGVGf5us0tGMu0Y-KUuiLzhTCdL6qSRbXA4HK3jSIHiLUHDf/exec?action=all")
  .then(res => res.json())
  .then(data => {
    allMembers = data;
    render(data);
  });

function render(list){
  let rows="";
  list.forEach(m=>{
    rows+=`
      <tr>
        <td>${m.id}</td>
        <td>${m.name}</td>
        <td>${m.phone}</td>
        <td><a href="card.html?id=${m.id}" target="_blank">View</a></td>
      </tr>`;
  });
  document.getElementById("members").innerHTML = rows;
}

document.getElementById("searchInput").addEventListener("input",function(){
  const q=this.value.toLowerCase();
  render(allMembers.filter(m =>
    String(m.id).includes(q) ||
    m.name.toLowerCase().includes(q) ||
    m.phone.includes(q)
  ));
});
</script>

</body>
</html>